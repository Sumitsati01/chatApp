{"ast":null,"code":"var _jsxFileName = \"/home/user/React/git/chat/src/components/Chats.jsx\",\n    _s = $RefreshSig$();\n\nimport { doc, onSnapshot } from 'firebase/firestore';\nimport React from 'react';\nimport { useState, useEffect, useContext } from 'react';\nimport { AuthContext } from '../context/authContext';\nimport { ChatContext } from '../context/chatContext';\nimport { db } from '../Pages/Firebase';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Chats() {\n  _s();\n\n  const {\n    currentUser\n  } = useContext(AuthContext);\n  const {\n    dispatch\n  } = useContext(ChatContext);\n  const [chats, setChats] = useState([]);\n  useEffect(() => {\n    const getChats = () => {\n      const unsub = onSnapshot(doc(db, \"userChats\", currentUser.uid), doc => {\n        var _Object$entries;\n\n        let chatt = [];\n        (_Object$entries = Object.entries(doc.data())) === null || _Object$entries === void 0 ? void 0 : _Object$entries.map(chat => {\n          if (chat[0] !== 'undefined') {\n            chatt.push(chat);\n          }\n        });\n        setChats([...chatt]);\n      });\n      return () => {\n        unsub();\n      };\n    };\n\n    currentUser.uid && getChats();\n  }, [currentUser.uid]);\n\n  const handleSelect = user => {\n    dispatch({\n      type: \"CHANGE_USER\",\n      payload: user\n    });\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chats\",\n    children: chats.map(chat => {\n      var _chat$, _chat$$userInfo, _chat$2, _chat$2$userInfo, _chat$3, _chat$3$userInfo, _chat$3$userInfo$last;\n\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"userChat\",\n        onClick: () => handleSelect(chat[1].userInfo),\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: (_chat$ = chat[1]) !== null && _chat$ !== void 0 && (_chat$$userInfo = _chat$.userInfo) !== null && _chat$$userInfo !== void 0 && _chat$$userInfo.photoURL ? chat[1].userInfo.photoURL : ' ',\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"userChatInfo\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: (_chat$2 = chat[1]) === null || _chat$2 === void 0 ? void 0 : (_chat$2$userInfo = _chat$2.userInfo) === null || _chat$2$userInfo === void 0 ? void 0 : _chat$2$userInfo.displayName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 44,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: (_chat$3 = chat[1]) === null || _chat$3 === void 0 ? void 0 : (_chat$3$userInfo = _chat$3.userInfo) === null || _chat$3$userInfo === void 0 ? void 0 : (_chat$3$userInfo$last = _chat$3$userInfo.lastmessage) === null || _chat$3$userInfo$last === void 0 ? void 0 : _chat$3$userInfo$last.text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 11\n        }, this)]\n      }, chat[0], true, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 9\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Chats, \"y6xey+fQSF0vldEFnu8KLNv2slY=\");\n\n_c = Chats;\nexport default Chats;\n\nvar _c;\n\n$RefreshReg$(_c, \"Chats\");","map":{"version":3,"names":["doc","onSnapshot","React","useState","useEffect","useContext","AuthContext","ChatContext","db","Chats","currentUser","dispatch","chats","setChats","getChats","unsub","uid","chatt","Object","entries","data","map","chat","push","handleSelect","user","type","payload","userInfo","photoURL","displayName","lastmessage","text"],"sources":["/home/user/React/git/chat/src/components/Chats.jsx"],"sourcesContent":["import { doc, onSnapshot } from 'firebase/firestore';\nimport React from 'react'\nimport { useState, useEffect, useContext } from 'react';\nimport { AuthContext } from '../context/authContext'\nimport { ChatContext } from '../context/chatContext';\nimport { db } from '../Pages/Firebase';\nfunction Chats() {\n  const { currentUser } = useContext(AuthContext);\n  const { dispatch } = useContext(ChatContext);\n  const [chats, setChats] = useState([]);\n\n  useEffect(() => {\n    const getChats = () => {\n      const unsub = onSnapshot(doc(db, \"userChats\", currentUser.uid), (doc) => {\n        let chatt = [];\n        Object.entries(doc.data())?.map((chat) => {\n          if (chat[0] !== 'undefined') {\n            chatt.push(chat);\n          }\n        })\n        setChats([...chatt])\n      });\n      return () => {\n        unsub()\n      };\n    };\n    currentUser.uid && getChats();\n  }, [currentUser.uid]);\n\n\n  const handleSelect = (user) => {\n    dispatch({ type: \"CHANGE_USER\", payload: user })\n  }\n\n\n  \n  return (\n    <div className='chats'>\n      {chats.map((chat) => (\n\n        <div className='userChat' key={chat[0]} onClick={() => handleSelect(chat[1].userInfo)}>\n          <img src={chat[1]?.userInfo?.photoURL ? chat[1].userInfo.photoURL : ' '} alt='' />\n          <div className='userChatInfo'>\n            <span>{chat[1]?.userInfo?.displayName}</span>\n            <p>{chat[1]?.userInfo?.lastmessage?.text }</p>\n          </div>\n        </div>\n      ))}\n    </div>\n\n\n  )\n}\n\nexport default Chats\n"],"mappings":";;;AAAA,SAASA,GAAT,EAAcC,UAAd,QAAgC,oBAAhC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,EAAmBC,SAAnB,EAA8BC,UAA9B,QAAgD,OAAhD;AACA,SAASC,WAAT,QAA4B,wBAA5B;AACA,SAASC,WAAT,QAA4B,wBAA5B;AACA,SAASC,EAAT,QAAmB,mBAAnB;;;AACA,SAASC,KAAT,GAAiB;EAAA;;EACf,MAAM;IAAEC;EAAF,IAAkBL,UAAU,CAACC,WAAD,CAAlC;EACA,MAAM;IAAEK;EAAF,IAAeN,UAAU,CAACE,WAAD,CAA/B;EACA,MAAM,CAACK,KAAD,EAAQC,QAAR,IAAoBV,QAAQ,CAAC,EAAD,CAAlC;EAEAC,SAAS,CAAC,MAAM;IACd,MAAMU,QAAQ,GAAG,MAAM;MACrB,MAAMC,KAAK,GAAGd,UAAU,CAACD,GAAG,CAACQ,EAAD,EAAK,WAAL,EAAkBE,WAAW,CAACM,GAA9B,CAAJ,EAAyChB,GAAD,IAAS;QAAA;;QACvE,IAAIiB,KAAK,GAAG,EAAZ;QACA,mBAAAC,MAAM,CAACC,OAAP,CAAenB,GAAG,CAACoB,IAAJ,EAAf,qEAA4BC,GAA5B,CAAiCC,IAAD,IAAU;UACxC,IAAIA,IAAI,CAAC,CAAD,CAAJ,KAAY,WAAhB,EAA6B;YAC3BL,KAAK,CAACM,IAAN,CAAWD,IAAX;UACD;QACF,CAJD;QAKAT,QAAQ,CAAC,CAAC,GAAGI,KAAJ,CAAD,CAAR;MACD,CARuB,CAAxB;MASA,OAAO,MAAM;QACXF,KAAK;MACN,CAFD;IAGD,CAbD;;IAcAL,WAAW,CAACM,GAAZ,IAAmBF,QAAQ,EAA3B;EACD,CAhBQ,EAgBN,CAACJ,WAAW,CAACM,GAAb,CAhBM,CAAT;;EAmBA,MAAMQ,YAAY,GAAIC,IAAD,IAAU;IAC7Bd,QAAQ,CAAC;MAAEe,IAAI,EAAE,aAAR;MAAuBC,OAAO,EAAEF;IAAhC,CAAD,CAAR;EACD,CAFD;;EAMA,oBACE;IAAK,SAAS,EAAC,OAAf;IAAA,UACGb,KAAK,CAACS,GAAN,CAAWC,IAAD;MAAA;;MAAA,oBAET;QAAK,SAAS,EAAC,UAAf;QAAwC,OAAO,EAAE,MAAME,YAAY,CAACF,IAAI,CAAC,CAAD,CAAJ,CAAQM,QAAT,CAAnE;QAAA,wBACE;UAAK,GAAG,EAAE,UAAAN,IAAI,CAAC,CAAD,CAAJ,6DAASM,QAAT,4DAAmBC,QAAnB,GAA8BP,IAAI,CAAC,CAAD,CAAJ,CAAQM,QAAR,CAAiBC,QAA/C,GAA0D,GAApE;UAAyE,GAAG,EAAC;QAA7E;UAAA;UAAA;UAAA;QAAA,QADF,eAEE;UAAK,SAAS,EAAC,cAAf;UAAA,wBACE;YAAA,qBAAOP,IAAI,CAAC,CAAD,CAAX,gEAAO,QAASM,QAAhB,qDAAO,iBAAmBE;UAA1B;YAAA;YAAA;YAAA;UAAA,QADF,eAEE;YAAA,qBAAIR,IAAI,CAAC,CAAD,CAAR,gEAAI,QAASM,QAAb,8EAAI,iBAAmBG,WAAvB,0DAAI,sBAAgCC;UAApC;YAAA;YAAA;YAAA;UAAA,QAFF;QAAA;UAAA;UAAA;UAAA;QAAA,QAFF;MAAA,GAA+BV,IAAI,CAAC,CAAD,CAAnC;QAAA;QAAA;QAAA;MAAA,QAFS;IAAA,CAAV;EADH;IAAA;IAAA;IAAA;EAAA,QADF;AAgBD;;GA9CQb,K;;KAAAA,K;AAgDT,eAAeA,KAAf"},"metadata":{},"sourceType":"module"}