{"ast":null,"code":"var _jsxFileName = \"/home/user/React/git/chat/src/components/Chats.jsx\",\n    _s = $RefreshSig$();\n\nimport { doc, onSnapshot } from 'firebase/firestore';\nimport React from 'react';\nimport { useState, useEffect, useContext } from 'react';\nimport { AuthContext } from '../context/authContext';\nimport { ChatContext } from '../context/chatContext';\nimport { db } from '../Pages/Firebase';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Chats() {\n  _s();\n\n  var _Object$entries;\n\n  const {\n    currentUser\n  } = useContext(AuthContext);\n  const {\n    dispatch\n  } = useContext(ChatContext);\n  const [chats, setChats] = useState([]);\n  useEffect(() => {\n    const getChats = () => {\n      const unsub = onSnapshot(doc(db, \"userChats\", currentUser.uid), doc => {\n        setChats(doc.data());\n      });\n      return () => {\n        unsub();\n      };\n    };\n\n    currentUser.uid && getChats();\n  }, [currentUser.uid]);\n\n  const handleSelect = user => {\n    dispatch({\n      type: \"CHANGE_USER\",\n      payload: user\n    });\n  };\n\n  console.log(chats);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chats\",\n    children: (_Object$entries = Object.entries(chats)) === null || _Object$entries === void 0 ? void 0 : _Object$entries.map(chat => /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"userChat\",\n      onClick: () => handleSelect(chat[1].userInfo),\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"userChatInfo\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 36,\n        columnNumber: 14\n      }, this)\n    }, chat[0], false, {\n      fileName: _jsxFileName,\n      lineNumber: 34,\n      columnNumber: 11\n    }, this))\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Chats, \"NsiAqXoGgzBr1ax4YSLB8mac6hQ=\");\n\n_c = Chats;\nexport default Chats;\n\nvar _c;\n\n$RefreshReg$(_c, \"Chats\");","map":{"version":3,"names":["doc","onSnapshot","React","useState","useEffect","useContext","AuthContext","ChatContext","db","Chats","currentUser","dispatch","chats","setChats","getChats","unsub","uid","data","handleSelect","user","type","payload","console","log","Object","entries","map","chat","userInfo"],"sources":["/home/user/React/git/chat/src/components/Chats.jsx"],"sourcesContent":["import { doc, onSnapshot } from 'firebase/firestore';\nimport React from 'react'\nimport { useState,useEffect,useContext } from 'react';\nimport { AuthContext } from '../context/authContext'\nimport { ChatContext } from '../context/chatContext';\nimport { db } from '../Pages/Firebase';\nfunction Chats() {\n  const {currentUser}=useContext(AuthContext);\n  const {dispatch}=useContext(ChatContext);\n  const [chats,setChats]=useState([]);\n\n  useEffect(()=>{\n    const getChats=()=>{\n      const unsub = onSnapshot(doc(db, \"userChats\", currentUser.uid), (doc) => {\n        setChats(doc.data())\n    });\n    return()=>{\n      unsub()\n    };\n    };\n   currentUser.uid && getChats();\n},[currentUser.uid]);\n\n\nconst handleSelect=(user)=>{\n dispatch({type:\"CHANGE_USER\",payload:user})\n}\n\nconsole.log(chats)\n    return (\n        <div className='chats'>\n          {Object.entries(chats)?.map((chat) => (\n         \n          <div className='userChat' key={chat[0]} onClick={()=>handleSelect(chat[1].userInfo)}>\n             {/* <img src={chat[1].userInfo.photoURL} alt=''/> */}\n             <div className='userChatInfo'>\n              {/* <span>{chat[1].userInfo.displayName}</span>\n              <p>{chat[1].userInfo.lastmessage?.text}</p> */}\n             </div>\n           </div> \n           ))}\n          </div>\n           \n       \n      )\n}\n\nexport default Chats\n"],"mappings":";;;AAAA,SAASA,GAAT,EAAcC,UAAd,QAAgC,oBAAhC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,EAAkBC,SAAlB,EAA4BC,UAA5B,QAA8C,OAA9C;AACA,SAASC,WAAT,QAA4B,wBAA5B;AACA,SAASC,WAAT,QAA4B,wBAA5B;AACA,SAASC,EAAT,QAAmB,mBAAnB;;;AACA,SAASC,KAAT,GAAiB;EAAA;;EAAA;;EACf,MAAM;IAACC;EAAD,IAAcL,UAAU,CAACC,WAAD,CAA9B;EACA,MAAM;IAACK;EAAD,IAAWN,UAAU,CAACE,WAAD,CAA3B;EACA,MAAM,CAACK,KAAD,EAAOC,QAAP,IAAiBV,QAAQ,CAAC,EAAD,CAA/B;EAEAC,SAAS,CAAC,MAAI;IACZ,MAAMU,QAAQ,GAAC,MAAI;MACjB,MAAMC,KAAK,GAAGd,UAAU,CAACD,GAAG,CAACQ,EAAD,EAAK,WAAL,EAAkBE,WAAW,CAACM,GAA9B,CAAJ,EAAyChB,GAAD,IAAS;QACvEa,QAAQ,CAACb,GAAG,CAACiB,IAAJ,EAAD,CAAR;MACH,CAFyB,CAAxB;MAGF,OAAM,MAAI;QACRF,KAAK;MACN,CAFD;IAGC,CAPD;;IAQDL,WAAW,CAACM,GAAZ,IAAmBF,QAAQ,EAA3B;EACF,CAVU,EAUT,CAACJ,WAAW,CAACM,GAAb,CAVS,CAAT;;EAaF,MAAME,YAAY,GAAEC,IAAD,IAAQ;IAC1BR,QAAQ,CAAC;MAACS,IAAI,EAAC,aAAN;MAAoBC,OAAO,EAACF;IAA5B,CAAD,CAAR;EACA,CAFD;;EAIAG,OAAO,CAACC,GAAR,CAAYX,KAAZ;EACI,oBACI;IAAK,SAAS,EAAC,OAAf;IAAA,6BACGY,MAAM,CAACC,OAAP,CAAeb,KAAf,CADH,oDACG,gBAAuBc,GAAvB,CAA4BC,IAAD,iBAE5B;MAAK,SAAS,EAAC,UAAf;MAAwC,OAAO,EAAE,MAAIT,YAAY,CAACS,IAAI,CAAC,CAAD,CAAJ,CAAQC,QAAT,CAAjE;MAAA,uBAEG;QAAK,SAAS,EAAC;MAAf;QAAA;QAAA;QAAA;MAAA;IAFH,GAA+BD,IAAI,CAAC,CAAD,CAAnC;MAAA;MAAA;MAAA;IAAA,QAFC;EADH;IAAA;IAAA;IAAA;EAAA,QADJ;AAgBH;;GAvCQlB,K;;KAAAA,K;AAyCT,eAAeA,KAAf"},"metadata":{},"sourceType":"module"}