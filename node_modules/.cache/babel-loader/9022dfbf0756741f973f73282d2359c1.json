{"ast":null,"code":"var _jsxFileName = \"/home/user/React/git/chat/src/components/Chats.jsx\",\n    _s = $RefreshSig$();\n\nimport { doc, onSnapshot } from 'firebase/firestore';\nimport React from 'react';\nimport { useState, useEffect, useContext } from 'react';\nimport { AuthContext } from '../context/authContext';\nimport { db } from '../Pages/Firebase';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Chats() {\n  _s();\n\n  var _Object$entries;\n\n  const {\n    currentUser\n  } = useContext(AuthContext);\n  const [chats, setChats] = useState([]);\n  useEffect(() => {\n    const getChats = () => {\n      const unsub = onSnapshot(doc(db, \"userChats\", currentUser.uid), doc => {\n        setChats(doc.data());\n      });\n      return () => {\n        unsub();\n      };\n    };\n\n    currentUser.uid && getChats();\n  }, [currentUser.uid]);\n  console.log(Object.entries(chats));\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chats\",\n    children: (_Object$entries = Object.entries(chats)) === null || _Object$entries === void 0 ? void 0 : _Object$entries.map(chat => {\n      var _chat$1$userInfo$last;\n\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"userChat\",\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: chat[1].userInfo.photoURL,\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 29,\n          columnNumber: 14\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"userChatInfo\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: chat[1].userInfo.displayName\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 31,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: (_chat$1$userInfo$last = chat[1].userInfo.lastmessage) === null || _chat$1$userInfo$last === void 0 ? void 0 : _chat$1$userInfo$last.text\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 32,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 30,\n          columnNumber: 14\n        }, this)]\n      }, chat[0], true, {\n        fileName: _jsxFileName,\n        lineNumber: 28,\n        columnNumber: 11\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 25,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Chats, \"PjfabmPNzRpvmH0frgN8QKMsDUo=\");\n\n_c = Chats;\nexport default Chats;\n\nvar _c;\n\n$RefreshReg$(_c, \"Chats\");","map":{"version":3,"names":["doc","onSnapshot","React","useState","useEffect","useContext","AuthContext","db","Chats","currentUser","chats","setChats","getChats","unsub","uid","data","console","log","Object","entries","map","chat","userInfo","photoURL","displayName","lastmessage","text"],"sources":["/home/user/React/git/chat/src/components/Chats.jsx"],"sourcesContent":["import { doc, onSnapshot } from 'firebase/firestore';\nimport React from 'react'\nimport { useState,useEffect,useContext } from 'react';\nimport { AuthContext } from '../context/authContext'\nimport { db } from '../Pages/Firebase';\nfunction Chats() {\n  const {currentUser}=useContext(AuthContext);\n  const [chats,setChats]=useState([]);\n\n  useEffect(()=>{\n    const getChats=()=>{\n      const unsub = onSnapshot(doc(db, \"userChats\", currentUser.uid), (doc) => {\n        setChats(doc.data())\n    });\n    return()=>{\n      unsub()\n    };\n    };\n   currentUser.uid && getChats();\n},[currentUser.uid]);\nconsole.log(Object.entries(chats))\n\n\n    return (\n        <div className='chats'>\n          {Object.entries(chats)?.map((chat)=>(\n\n          <div className='userChat' key={chat[0]}>\n             <img src={chat[1].userInfo.photoURL} alt=''/>\n             <div className='userChatInfo'>\n              <span>{chat[1].userInfo.displayName}</span>\n              <p>{chat[1].userInfo.lastmessage?.text}</p>\n             </div>\n           </div> \n           ))}\n          </div>\n           \n       \n      )\n}\n\nexport default Chats\n"],"mappings":";;;AAAA,SAASA,GAAT,EAAcC,UAAd,QAAgC,oBAAhC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,SAASC,QAAT,EAAkBC,SAAlB,EAA4BC,UAA5B,QAA8C,OAA9C;AACA,SAASC,WAAT,QAA4B,wBAA5B;AACA,SAASC,EAAT,QAAmB,mBAAnB;;;AACA,SAASC,KAAT,GAAiB;EAAA;;EAAA;;EACf,MAAM;IAACC;EAAD,IAAcJ,UAAU,CAACC,WAAD,CAA9B;EACA,MAAM,CAACI,KAAD,EAAOC,QAAP,IAAiBR,QAAQ,CAAC,EAAD,CAA/B;EAEAC,SAAS,CAAC,MAAI;IACZ,MAAMQ,QAAQ,GAAC,MAAI;MACjB,MAAMC,KAAK,GAAGZ,UAAU,CAACD,GAAG,CAACO,EAAD,EAAK,WAAL,EAAkBE,WAAW,CAACK,GAA9B,CAAJ,EAAyCd,GAAD,IAAS;QACvEW,QAAQ,CAACX,GAAG,CAACe,IAAJ,EAAD,CAAR;MACH,CAFyB,CAAxB;MAGF,OAAM,MAAI;QACRF,KAAK;MACN,CAFD;IAGC,CAPD;;IAQDJ,WAAW,CAACK,GAAZ,IAAmBF,QAAQ,EAA3B;EACF,CAVU,EAUT,CAACH,WAAW,CAACK,GAAb,CAVS,CAAT;EAWFE,OAAO,CAACC,GAAR,CAAYC,MAAM,CAACC,OAAP,CAAeT,KAAf,CAAZ;EAGI,oBACI;IAAK,SAAS,EAAC,OAAf;IAAA,6BACGQ,MAAM,CAACC,OAAP,CAAeT,KAAf,CADH,oDACG,gBAAuBU,GAAvB,CAA4BC,IAAD;MAAA;;MAAA,oBAE5B;QAAK,SAAS,EAAC,UAAf;QAAA,wBACG;UAAK,GAAG,EAAEA,IAAI,CAAC,CAAD,CAAJ,CAAQC,QAAR,CAAiBC,QAA3B;UAAqC,GAAG,EAAC;QAAzC;UAAA;UAAA;UAAA;QAAA,QADH,eAEG;UAAK,SAAS,EAAC,cAAf;UAAA,wBACC;YAAA,UAAOF,IAAI,CAAC,CAAD,CAAJ,CAAQC,QAAR,CAAiBE;UAAxB;YAAA;YAAA;YAAA;UAAA,QADD,eAEC;YAAA,mCAAIH,IAAI,CAAC,CAAD,CAAJ,CAAQC,QAAR,CAAiBG,WAArB,0DAAI,sBAA8BC;UAAlC;YAAA;YAAA;YAAA;UAAA,QAFD;QAAA;UAAA;UAAA;UAAA;QAAA,QAFH;MAAA,GAA+BL,IAAI,CAAC,CAAD,CAAnC;QAAA;QAAA;QAAA;MAAA,QAF4B;IAAA,CAA3B;EADH;IAAA;IAAA;IAAA;EAAA,QADJ;AAgBH;;GAlCQb,K;;KAAAA,K;AAoCT,eAAeA,KAAf"},"metadata":{},"sourceType":"module"}