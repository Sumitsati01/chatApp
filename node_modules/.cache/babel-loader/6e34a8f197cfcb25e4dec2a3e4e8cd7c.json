{"ast":null,"code":"var _jsxFileName = \"/home/user/React/git/chat/src/components/Chats.jsx\",\n    _s = $RefreshSig$();\n\nimport { doc, onSnapshot } from 'firebase/firestore';\nimport React from 'react';\nimport { useState, useEffect, useContext } from 'react';\nimport { AuthContext } from '../context/authContext';\nimport { ChatContext } from '../context/chatContext';\nimport { db } from '../Pages/Firebase';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Chats() {\n  _s();\n\n  const {\n    currentUser\n  } = useContext(AuthContext);\n  const {\n    dispatch\n  } = useContext(ChatContext);\n  const [chats, setChats] = useState([]);\n  useEffect(() => {\n    const getChats = () => {\n      const unsub = onSnapshot(doc(db, \"userChats\", currentUser.uid), doc => {\n        var _Object$entries;\n\n        let chatt = [];\n        (_Object$entries = Object.entries(doc.data())) === null || _Object$entries === void 0 ? void 0 : _Object$entries.map(chat => {\n          if (chat[0] !== 'undefined') {\n            chatt.push(chat);\n          }\n        });\n        setChats([...chatt]);\n      });\n      return () => {\n        unsub();\n      };\n    };\n\n    currentUser.uid && getChats();\n  }, [currentUser.uid]);\n\n  const handleSelect = user => {\n    dispatch({\n      type: \"CHANGE_USER\",\n      payload: user\n    });\n  };\n\n  console.log(chatt);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chats\",\n    children: chats.map(chat => {\n      var _chat$, _chat$$userInfo, _chat$2, _chat$2$userInfo, _chat$3, _chat$3$userInfo, _chat$3$userInfo$last;\n\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"userChat\",\n        onClick: () => handleSelect(chat[1].userInfo),\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: (_chat$ = chat[1]) !== null && _chat$ !== void 0 && (_chat$$userInfo = _chat$.userInfo) !== null && _chat$$userInfo !== void 0 && _chat$$userInfo.photoURL ? chat[1].userInfo.photoURL : '--',\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 42,\n          columnNumber: 14\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"userChatInfo\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: (_chat$2 = chat[1]) !== null && _chat$2 !== void 0 && (_chat$2$userInfo = _chat$2.userInfo) !== null && _chat$2$userInfo !== void 0 && _chat$2$userInfo.displayName ? chat[1].userInfo.displayName : '--'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 44,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: (_chat$3 = chat[1]) !== null && _chat$3 !== void 0 && (_chat$3$userInfo = _chat$3.userInfo) !== null && _chat$3$userInfo !== void 0 && (_chat$3$userInfo$last = _chat$3$userInfo.lastmessage) !== null && _chat$3$userInfo$last !== void 0 && _chat$3$userInfo$last.text ? chat[1].userInfo.lastmessage.text : '--'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 45,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 43,\n          columnNumber: 14\n        }, this)]\n      }, chat[0], true, {\n        fileName: _jsxFileName,\n        lineNumber: 41,\n        columnNumber: 11\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 38,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Chats, \"NsiAqXoGgzBr1ax4YSLB8mac6hQ=\");\n\n_c = Chats;\nexport default Chats;\n\nvar _c;\n\n$RefreshReg$(_c, \"Chats\");","map":{"version":3,"names":["doc","onSnapshot","React","useState","useEffect","useContext","AuthContext","ChatContext","db","Chats","currentUser","dispatch","chats","setChats","getChats","unsub","uid","chatt","Object","entries","data","map","chat","push","handleSelect","user","type","payload","console","log","userInfo","photoURL","displayName","lastmessage","text"],"sources":["/home/user/React/git/chat/src/components/Chats.jsx"],"sourcesContent":["import { doc, onSnapshot } from 'firebase/firestore';\nimport React from 'react'\nimport { useState,useEffect,useContext } from 'react';\nimport { AuthContext } from '../context/authContext'\nimport { ChatContext } from '../context/chatContext';\nimport { db } from '../Pages/Firebase';\nfunction Chats() {\n  const {currentUser}=useContext(AuthContext);\n  const {dispatch}=useContext(ChatContext);\n  const [chats,setChats]=useState([]);\n\n  useEffect(()=>{\n    const getChats=()=>{\n      const unsub = onSnapshot(doc(db, \"userChats\", currentUser.uid), (doc) => {\nlet chatt=[];\nObject.entries(doc.data())?.map((chat) => {\n  if(chat[0]!=='undefined'){\n    chatt.push(chat);\n  }\n})\nsetChats([...chatt])\n    });\n    return()=>{\n      unsub()\n    };\n    };\n   currentUser.uid && getChats();\n},[currentUser.uid]);\n\n\nconst handleSelect=(user)=>{\n dispatch({type:\"CHANGE_USER\",payload:user})\n}\n\n\nconsole.log(chatt);\n    return (\n        <div className='chats'>\n          {chats.map((chat) => (\n        \n          <div className='userChat' key={chat[0]} onClick={()=>handleSelect(chat[1].userInfo)}>\n             <img src={chat[1]?.userInfo?.photoURL ? chat[1].userInfo.photoURL:'--' } alt=''/>\n             <div className='userChatInfo'>\n              <span>{chat[1]?.userInfo?.displayName ? chat[1].userInfo.displayName :'--'}</span>\n              <p>{chat[1]?.userInfo?.lastmessage?.text ? chat[1].userInfo.lastmessage.text :'--'}</p>\n             </div>\n           </div> \n  ))}\n          </div>\n           \n       \n      )\n}\n\nexport default Chats\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}