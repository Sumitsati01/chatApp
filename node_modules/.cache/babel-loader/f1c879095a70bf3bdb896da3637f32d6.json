{"ast":null,"code":"var _jsxFileName = \"/home/user/React/git/chat/src/components/Chats.jsx\",\n    _s = $RefreshSig$();\n\nimport { doc, onSnapshot } from 'firebase/firestore';\nimport React from 'react';\nimport { useState, useEffect, useContext } from 'react';\nimport { AuthContext } from '../context/authContext';\nimport { ChatContext } from '../context/chatContext';\nimport { db } from '../Pages/Firebase';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction Chats() {\n  _s();\n\n  const {\n    currentUser\n  } = useContext(AuthContext);\n  const {\n    dispatch\n  } = useContext(ChatContext);\n  const [chats, setChats] = useState([]);\n  useEffect(() => {\n    const getChats = () => {\n      const unsub = onSnapshot(doc(db, \"userChats\", currentUser.uid), doc => {\n        setChats(doc.data());\n      });\n      return () => {\n        unsub();\n      };\n    };\n\n    currentUser.uid && getChats();\n  }, [currentUser.uid]);\n\n  const handleSelect = user => {\n    dispatch({\n      type: \"CHANGE_USER\",\n      payload: user\n    });\n  };\n\n  const chatt = [];\n  {\n    var _Object$entries;\n\n    (_Object$entries = Object.entries(chats)) === null || _Object$entries === void 0 ? void 0 : _Object$entries.map(chat => {\n      if (chat[0] !== 'undefined') {\n        const chatt = chat;\n      }\n    });\n  }\n  console.log(chatt);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"chats\",\n    children: chatt.map(chat => {\n      var _chat$, _chat$$userInfo, _chat$2, _chat$2$userInfo, _chat$3, _chat$3$userInfo, _chat$3$userInfo$last;\n\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"userChat\",\n        onClick: () => handleSelect(chat[1].userInfo),\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: (_chat$ = chat[1]) !== null && _chat$ !== void 0 && (_chat$$userInfo = _chat$.userInfo) !== null && _chat$$userInfo !== void 0 && _chat$$userInfo.photoURL ? chat[1].userInfo.photoURL : '--',\n          alt: \"\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 40,\n          columnNumber: 14\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"userChatInfo\",\n          children: [/*#__PURE__*/_jsxDEV(\"span\", {\n            children: (_chat$2 = chat[1]) !== null && _chat$2 !== void 0 && (_chat$2$userInfo = _chat$2.userInfo) !== null && _chat$2$userInfo !== void 0 && _chat$2$userInfo.displayName ? chat[1].userInfo.displayName : '--'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 42,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: (_chat$3 = chat[1]) !== null && _chat$3 !== void 0 && (_chat$3$userInfo = _chat$3.userInfo) !== null && _chat$3$userInfo !== void 0 && (_chat$3$userInfo$last = _chat$3$userInfo.lastmessage) !== null && _chat$3$userInfo$last !== void 0 && _chat$3$userInfo$last.text ? chat[1].userInfo.lastmessage.text : '--'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 43,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 41,\n          columnNumber: 14\n        }, this)]\n      }, chat[0], true, {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 11\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 36,\n    columnNumber: 9\n  }, this);\n}\n\n_s(Chats, \"NsiAqXoGgzBr1ax4YSLB8mac6hQ=\");\n\n_c = Chats;\nexport default Chats;\n\nvar _c;\n\n$RefreshReg$(_c, \"Chats\");","map":{"version":3,"names":["doc","onSnapshot","React","useState","useEffect","useContext","AuthContext","ChatContext","db","Chats","currentUser","dispatch","chats","setChats","getChats","unsub","uid","data","handleSelect","user","type","payload","chatt","Object","entries","map","chat","console","log","userInfo","photoURL","displayName","lastmessage","text"],"sources":["/home/user/React/git/chat/src/components/Chats.jsx"],"sourcesContent":["import { doc, onSnapshot } from 'firebase/firestore';\nimport React from 'react'\nimport { useState,useEffect,useContext } from 'react';\nimport { AuthContext } from '../context/authContext'\nimport { ChatContext } from '../context/chatContext';\nimport { db } from '../Pages/Firebase';\nfunction Chats() {\n  const {currentUser}=useContext(AuthContext);\n  const {dispatch}=useContext(ChatContext);\n  const [chats,setChats]=useState([]);\n\n  useEffect(()=>{\n    const getChats=()=>{\n      const unsub = onSnapshot(doc(db, \"userChats\", currentUser.uid), (doc) => {\n        setChats(doc.data())\n    });\n    return()=>{\n      unsub()\n    };\n    };\n   currentUser.uid && getChats();\n},[currentUser.uid]);\n\n\nconst handleSelect=(user)=>{\n dispatch({type:\"CHANGE_USER\",payload:user})\n}\nconst chatt=[];\n{Object.entries(chats)?.map((chat) => {\n  if(chat[0]!=='undefined'){\n    const chatt=chat;\n  }\n})}\nconsole.log(chatt);\n    return (\n        <div className='chats'>\n          {chatt.map((chat) => (\n        \n          <div className='userChat' key={chat[0]} onClick={()=>handleSelect(chat[1].userInfo)}>\n             <img src={chat[1]?.userInfo?.photoURL ? chat[1].userInfo.photoURL:'--' } alt=''/>\n             <div className='userChatInfo'>\n              <span>{chat[1]?.userInfo?.displayName ? chat[1].userInfo.displayName :'--'}</span>\n              <p>{chat[1]?.userInfo?.lastmessage?.text ? chat[1].userInfo.lastmessage.text :'--'}</p>\n             </div>\n           </div> \n  ))}\n          </div>\n           \n       \n      )\n}\n\nexport default Chats\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}